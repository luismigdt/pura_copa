<!DOCTYPE html>

<html lang="es">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>PURA COPA</title>

  <style>

    body {

      margin: 0;

      padding: 20px;

      background: linear-gradient(135deg, #4b0000, #800020, #1f0000);

      background-size: 400% 400%;

      animation: gradient 20s ease infinite;

      color: #e2e8f0;

      font-family: 'Segoe UI', sans-serif;

      display: flex;

      flex-direction: column;

      align-items: center;

      min-height: 100vh;

    }



    @keyframes gradient {

      0% { background-position: 0% 50%; }

      50% { background-position: 100% 50%; }

      100% { background-position: 0% 50%; }

    }



    .title-container {

      filter: drop-shadow(2px 2px 5px rgba(255, 255, 255, 0.4));

      display: flex;

      align-items: center;

      gap: 20px;

      margin-bottom: 40px;

      user-select: none;

    }



    .title-container img {

      width: 50px;

      height: 50px;

      object-fit: contain;

    }



    h1 {

      color: #f59e0b;

      font-weight: 900;

      font-size: 3rem;

      margin: 0;

    }



    .bracket {

      display: grid;

      grid-template-columns: repeat(7, max-content);

      grid-template-rows: repeat(15, 1fr);

      gap: 10px 30px;

      width: 100%;

      max-width: 1200px;

      margin-bottom: 0;

    }

      .bracket-wrapper {
    overflow-x: auto;
    width: 100%;
    padding-bottom: 20px;
    }


    .round-title {

      color: #fbbf24;

      font-weight: bold;

      font-size: 1.25rem;

      text-align: center;

      grid-row: 1;

      user-select: none;

    }



    .match {

      background: #1e293b;

      border-radius: 8px;

      padding: 10px 12px;

      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);

      font-size: 0.9rem;

      color: #e2e8f0;

      display: flex;

      flex-direction: column;

      gap: 4px;

      min-width: 180px;

      max-width: 240px;

    }



    .team-winner {

      font-weight: bold;

      color: #3b0a0a;

    }



    .final {

      background: #f59e0b;

      border: 2px solid #fbbf24;

      border-radius: 12px;

      padding: 15px;

      font-weight: bold;

      font-size: 1.1rem;

      color: #1e293b;

      display: flex;

      flex-direction: column;

      gap: 6px;

      min-width: 220px;

      justify-content: center;

      align-items: center;

    }

    #buttons-container {

      margin-top: 0;

      display: flex;

      justify-content: center;

      gap: 15px;

      flex-wrap: wrap;

    }



    #buttons-container button {

      background-color: #f59e0b;

      border: none;

      color: #1e293b;

      padding: 12px 25px;

      font-size: 1.1rem;

      font-weight: bold;

      border-radius: 8px;

      cursor: pointer;

      box-shadow: 0 4px 8px rgba(0,0,0,0.3);

    }



    #buttons-container button#btn-prev {

      background-color: #64748b;

      color: #e2e8f0;

    }

    @media (max-width: 768px) {

      h1 {

        font-size: 2rem;

      }



      .title-container img {

        width: 35px;

        height: 35px;

      }



      .bracket {

        display: grid;
        grid-template-columns: repeat(7, max-content);
        grid-template-rows: repeat(15, 1fr);
        gap: 10px 20px;
        min-width: 900px; 

          }

      }


      .scroll-tip {

        display: block;

      }



      .match, .final {

        min-width: 140px;

        padding: 8px;

        font-size: 0.8rem;

      }



      .round-title {

        font-size: 1rem;

      }



      #buttons-container {

        flex-direction: column;

        gap: 10px;

        margin-top: 0;

        padding-top: 0;

      }

      body {

        padding: 10px;

      }


    .scroll-tip {

      display: none;

      font-size: 0.9rem;

      color: #fbbf24;

      background-color: rgba(0, 0, 0, 0.3);

      padding: 6px 12px;

      margin-top: 30px;

      margin-bottom: 10px;

      border-radius: 6px;

      text-align: center;

      user-select: none;

      animation: pulse 2s infinite;

    }



    @keyframes pulse {

      0% { opacity: 0.6; }

      50% { opacity: 1; }

      100% { opacity: 0.6; }

    }



    /* Colocaci√≥n */



    /* T√≠tulos */

    .bracket .round-title:nth-child(1)  { grid-column: 1; }

    .bracket .round-title:nth-child(2)  { grid-column: 2; }

    .bracket .round-title:nth-child(3)  { grid-column: 3; }

    .bracket .round-title:nth-child(4)  { grid-column: 4; }

    .bracket .round-title:nth-child(5)  { grid-column: 5; }

    .bracket .round-title:nth-child(6)  { grid-column: 6; }

    .bracket .round-title:nth-child(7)  { grid-column: 7; }



    /* Octavos izquierda */

    #m1 { grid-column: 1; grid-row: 2 / span 2; }

    #m2 { grid-column: 1; grid-row: 4 / span 2; }

    #m3 { grid-column: 1; grid-row: 6 / span 2; }

    #m4 { grid-column: 1; grid-row: 8 / span 2; }



    /* Cuartos izquierda */

    #q1 { grid-column: 2; grid-row: 3 / span 2; }

    #q2 { grid-column: 2; grid-row: 7 / span 2; }



    /* Semis izquierda */

    #s1 { grid-column: 3; grid-row: 5 / span 2; }



    /* Final */

    #f1 { grid-column: 4; grid-row: 6 / span 2; }



    /* Semis derecha */

    #s2 { grid-column: 5; grid-row: 5 / span 2; }



    /* Cuartos derecha */

    #q3 { grid-column: 6; grid-row: 3 / span 2; }

    #q4 { grid-column: 6; grid-row: 7 / span 2; }



    /* Octavos derecha */

    #m5 { grid-column: 7; grid-row: 2 / span 2; }

    #m6 { grid-column: 7; grid-row: 4 / span 2; }

    #m7 { grid-column: 7; grid-row: 6 / span 2; }

    #m8 { grid-column: 7; grid-row: 8 / span 2; }

  </style>

</head>

<body>



  <div class="title-container">

    <img src="puracopa.png" alt="Logo Izquierda" />

    <h1>PURA COPA</h1>

    <img src="puracopa.png" alt="Logo Derecha" />

  </div>



  <div class="bracket-wrapper"">
    <div class="bracket">

    <!-- T√≠tulos -->

    <div class="round-title">Octavos</div>

    <div class="round-title">Cuartos</div>

    <div class="round-title">Semis</div>

    <div class="round-title">Final</div>

    <div class="round-title">Semis</div>

    <div class="round-title">Cuartos</div>

    <div class="round-title">Octavos</div>



    <!-- Partidos: los rellenaremos con JS -->

    <div class="match" id="m1"></div>

    <div class="match" id="m2"></div>

    <div class="match" id="m3"></div>

    <div class="match" id="m4"></div>



    <div class="match" id="q1"></div>

    <div class="match" id="q2"></div>



    <div class="match" id="s1"></div>



    <div class="match final" id="f1"></div>



    <div class="match" id="s2"></div>



    <div class="match" id="q3"></div>

    <div class="match" id="q4"></div>



    <div class="match" id="m5"></div>

    <div class="match" id="m6"></div>

    <div class="match" id="m7"></div>

    <div class="match" id="m8"></div>

    </div>

  </div>

  <div class="scroll-tip">‚¨ÖÔ∏è Desliza para ver el cuadro ‚û°Ô∏è</div>


  <div id="buttons-container">

    <button id="btn-next">Siguiente ronda</button>

  </div>



<script>

  const sheetId = "1M7dV2jRDWsh4A4PhbVlbpFmcEX4l-C-2ERUdG-F29ew";

  const sheetName = "Hoja 1"; 

  const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=${sheetName}`;



  // Funci√≥n para parsear datos del JSON de Google Sheets

  function parseSheetData(data) {

    const json = JSON.parse(data.substring(47, data.length - 2));

    return json.table.rows.map(row => {

      return {

        id: row.c[0]?.v || "",

        equipo1: row.c[1]?.v || "",

        equipo2: row.c[2]?.v || "",

        ida: row.c[3]?.v || "",

        vuelta: row.c[4]?.v || ""

      };

    });

  }



  function crearMatchHtml(match) {

    const golesIda = match.ida?.includes("-") ? match.ida.split('-').map(x => parseInt(x.trim())) : [0, 0];

    const golesVuelta = match.vuelta?.includes("-") ? match.vuelta.split('-').map(x => parseInt(x.trim())) : [0, 0];



    const total1 = (golesIda[0] || 0) + (golesVuelta[0] || 0);

    const total2 = (golesIda[1] || 0) + (golesVuelta[1] || 0);



    const team1Winner = total1 > total2;

    const team2Winner = total2 > total1;



    const resultadoFinal = `${total1} - ${total2}`;

    const idaStr = match.ida ? `Ida: ${match.ida}` : '';

    const vueltaStr = match.vuelta ? `Vuelta: ${match.vuelta}` : '';



    // Solo mostrar total si hay goles en ida o vuelta

     const totalHTML = (match.ida || match.vuelta)

    ? `<div class="team">Total: ${resultadoFinal}</div>`

    : '';



    if (match.id === "f1") {

      // Final a partido √∫nico

      const golesFinal = match.ida?.includes("-") ? match.ida.split('-').map(x => parseInt(x.trim())) : [0, 0];

      const f1Team1Winner = golesFinal[0] > golesFinal[1];

      const f1Team2Winner = golesFinal[1] > golesFinal[0];

      const resultadoUnico = match.ida || "";



      return `

        <div class="team ${f1Team1Winner ? "team-winner" : ""}">

          ${match.equipo1} ${f1Team1Winner ? "üèÜ" : ""}

        </div>

        <div class="team ${f1Team2Winner ? "team-winner" : ""}">

          ${match.equipo2} ${f1Team2Winner ? "üèÜ" : ""}

        </div>

        <div class="team">${resultadoUnico}</div>

      `;

    }



    // Para el resto de partidos

    return `

      <div class="team ${team1Winner ? "team-winner" : ""}">${match.equipo1}</div>

      <div class="team ${team2Winner ? "team-winner" : ""}">${match.equipo2}</div>

      ${totalHTML}

      <div class="team">${idaStr}</div>

      <div class="team">${vueltaStr}</div>

    `;

  }



  fetch(url)

    .then(res => res.text())

    .then(data => {

      const matches = parseSheetData(data);

      matches.forEach(match => {

        const div = document.getElementById(match.id);

        if (div) {

          div.innerHTML = crearMatchHtml(match);

        }

      });

    })

    .catch(e => {

      console.error("Error cargando datos de Google Sheets:", e);

    });



  document.getElementById('btn-next').addEventListener('click', () => {

    window.location.href = 'cuartos.html';

  });

</script>



</body>

</html>
