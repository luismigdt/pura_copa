          <div>${match.equipo1} <strong>${team1Winner ? "🏆" : ""}</strong></div>
          <div>${match.equipo2} <strong>${team2Winner ? "🏆" : ""}</strong></div>
          <div>${resultadoFinal}</div>
        `;
      }

      return `
        <div class="${team1Winner ? "team-winner" : ""}">${match.equipo1}</div>
        <div class="${team2Winner ? "team-winner" : ""}">${match.equipo2}</div>
        <div>${resultadoFinal}</div>
      `;
    }

    function obtenerGanador(match) {
      const golesIda = match.ida.split('-').map(x => parseInt(x.trim()));
      const golesVuelta = match.vuelta.split('-').map(x => parseInt(x.trim()));
      const total1 = (golesIda[0] || 0) + (golesVuelta[0] || 0);
      const total2 = (golesIda[1] || 0) + (golesVuelta[1] || 0);

      if (total1 > total2) return match.equipo1;
      if (total2 > total1) return match.equipo2;
      return ""; // empate o sin datos
    }

    function actualizarSiguienteRonda(data) {
      // Map de id de partidos de cada ronda con los partidos que alimentan esa ronda
      // Por ejemplo: q1 depende de ganador m1 y m2
      const nextRounds = {
        q1: ["m1", "m2"],
        q2: ["m3", "m4"],
        s1: ["q1", "q2"],
        f1: ["s1", "s2"],
        s2: ["q3", "q4"],
        q3: ["m5", "m6"],
        q4: ["m7", "m8"]
      };

      // Para cada partido en nextRounds, obtener ganadores de partidos previos y asignarlos
      for (const [key, prevMatches] of Object.entries(nextRounds)) {
        const equipo1 = obtenerGanador(data.find(m => m.id === prevMatches[0])) || "";
        const equipo2 = obtenerGanador(data.find(m => m.id === prevMatches[1])) || "";

        const partido = data.find(m => m.id === key);
        if (partido) {
          partido.equipo1 = equipo1;
          partido.equipo2 = equipo2;
        }
      }
    }

    async function cargarDatos() {
      const res = await fetch(url);
      const dataText = await res.text();
      let data = parseSheetData(dataText);

      // Actualizar los equipos de las siguientes rondas automáticamente
      actualizarSiguienteRonda(data);

      // Poner HTML en cada div
      data.forEach(match => {
        const div = document.getElementById(match.id);
        if (div) {
          div.innerHTML = crearMatchHtml(match);
        }
      });
    }

    cargarDatos();
  </script>
</body>
</html>
